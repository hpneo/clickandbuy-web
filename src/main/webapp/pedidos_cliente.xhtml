<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      template="layout_cliente.xhtml">
  <f:loadBundle basename="site_labels" var="site_labels" />
  <ui:define name="body">
      <h:form id="pedidos_form">
    <div >
      <div class="h3">
        <h3>#{site_labels.orders}</h3>
      </div>
      <div >
          <h:commandButton id="pedidos_buton"  value="#{site_labels.orders_new}" action="/pedido_nuevo.xhtml"/>  
      </div>
    </div>
    <div class="row">
      <p:dataTable id="pedidos" value="#{pedidoController.pedidos}" var="pedido" rows="100" emptyMessage="#{site_labels.no_records}">
        <p:column headerText="#{site_labels.order_create_date}">
          #{pedido.pedFechahora}
        </p:column>
        <p:column headerText="#{site_labels.order_user}">
          #{pedido.cliente.cliNombreusuario}
        </p:column>
        <p:column headerText="#{site_labels.order_products_count}">
          #{pedido.productoxpedidos.size()}
        </p:column>
        <p:column headerText="#{site_labels.actions}">
          <h:outputLink value="pedidos/#{pedido.pedCodigo}">
            Editar
          </h:outputLink>
        </p:column>
      </p:dataTable>
    </div>
      </h:form>
  </ui:define>
</ui:composition>
